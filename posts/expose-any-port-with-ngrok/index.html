<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Expose Any Port With Ngrok | reHex Ninja</title>
<meta name="keywords" content="dev, linux">
<meta name="description" content="How to expose any port to the Internet without exposing your private IP (for free).">
<meta name="author" content="trib0r3">
<link rel="canonical" href="https://rehex.ninja/posts/expose-any-port-with-ngrok/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css" integrity="sha256-j&#43;ECM6cGvIfy4Is8&#43;XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://rehex.ninja/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://rehex.ninja/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://rehex.ninja/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://rehex.ninja/apple-touch-icon.png">
<link rel="mask-icon" href="https://rehex.ninja/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://rehex.ninja/posts/expose-any-port-with-ngrok/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://rehex.ninja/posts/expose-any-port-with-ngrok/">
  <meta property="og:site_name" content="reHex Ninja">
  <meta property="og:title" content="Expose Any Port With Ngrok">
  <meta property="og:description" content="How to expose any port to the Internet without exposing your private IP (for free).">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2020-02-01T13:53:37+01:00">
    <meta property="article:modified_time" content="2020-02-01T13:53:37+01:00">
    <meta property="article:tag" content="Dev">
    <meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Expose Any Port With Ngrok">
<meta name="twitter:description" content="How to expose any port to the Internet without exposing your private IP (for free).">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://rehex.ninja/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Expose Any Port With Ngrok",
      "item": "https://rehex.ninja/posts/expose-any-port-with-ngrok/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Expose Any Port With Ngrok",
  "name": "Expose Any Port With Ngrok",
  "description": "How to expose any port to the Internet without exposing your private IP (for free).\n",
  "keywords": [
    "dev", "linux"
  ],
  "articleBody": "How to expose any port to the Internet without exposing your private IP (for free).\nToday I will show you how to easly setup exposure of any port without exposing your IP, this solution also bypasses situation when your ISP is not giving possibility to have private (own) IP address which is not behind any NAT.\nI used this solution to create access (for myself) to SSH and locally hosted security camera system at my home.\n1. Setup NGrok First of all you need to have an ngrok account[1] - free account is enough for our purposes. Generally ngrok is a reverse-proxy service where you need tun ngrok client on target machine, client enables connection with ngrok server and then you are able to connect with your machine (where ngrok client is running) via Internet.\nFree acount forwards local port as random remote port (usually under const hostname: 0.tcp.ngrok.io for tcp tunnels)\nAfter you have account you need to download client and activate account with your API key (follow the instuctions from web service).\n2. Verify that tunnel works Create ngrok config file (under ~/.ngrok2/ngrok.yml):\nauthtoken: tunnels: sshglob: proto: tcp addr: 22 Above config setups tunnel sshglob which forwards locally hosted tcp/22 - in this case SSH service. You should change these values according to your needs.\nNow you can try to start ngrok ngrok start sshglob:\nngrok by @inconshreveable (Ctrl+C to quit) Session Status online Account whoami (Plan: Free) Version 2.3.35 Region United States (us) Web Interface http://127.0.0.1:4040 Forwarding tcp://0.tcp.ngrok.io:13036 -\u003e localhost:22 Connections ttl opn rt1 rt5 p50 p90 0 0 0.00 0.00 0.00 0.00 Now you should be able to connect with ssh (in my case) with command: ssh -p 13036 whoami@0.tcp.ngrok.io.\nIf you don’t have any issues with accessing you machine over Internet you are free to follow next steps :) (otherwise check Troubleshooting section).\n3. Bypass random port issue If you run ngrok couple of times you should notice that every time you service is running at random port, to bypass this issue you can by a premium or make some additional steps presented below.\nInstall dependencies sudo apt install -y python3 python3-pip curl jq pip3 install telegram Setup Telegram bot For myself I decided to create Telegram[2] bot which will send me external hostname and random IP address. Ofc you need to have created Telegram account to follow next steps.\nStart conversation with telegram Botfather. Type commands in Botfather conversation: /newbot mysuper_bot # replace \"mysuper\" with your bot name Copy API key and start conversation with your bot Type something in the chat \u0026 run the below code: from sys import argv import telegram bot = telegram.Bot(token=\"YOUR_API_KEY\") print(bot.getUpdates()) Copy chat_id Create script tsend.py: from sys import argv import telegram bot = telegram.Bot(token=\"YOUR_API_KEY\") # FIXME your api key chat_id = 1234 # FIXME YOUR_CHAT_ID raw_msg = argv[1].replace('\"','').replace('tcp://','') # \"tcp://0.tcp.ngrok.io:10361\" ip,port = raw_msg.split(':') message = f'{ip}:{port}' bot.send_message(chat_id=chat_id, text=message) Check if you are able to send message to you from your bot by typing python3 tsend.py hello. Make your service always available Final step, below script will:\nStart ngrok tunnel if it is not running Send you actual IP:PORT thanks to telegram bot Below script is designed to be run from cron, thanks to this solution it will be run automatically i.e every 5 minutes: */5 * * * * path/to/monitor.sh\n# monitor.sh #!/bin/bash NGROK='/usr/local/bin/ngrok' DIR=\"$HOME/ngrok-apps\" # directory containing this script and tsend.py URL_DIR='/tmp/ngrok-url' # check if it's working if [ ! \"$(pidof ngrok)\" ]; then echo \"[ngrok] is not working, starting new instance...\" $NGROK start sshglob \u003e /dev/null \u0026 sleep 3 fi # get current status of tunnel NEW_STATUS=\"$(curl -s http://127.0.0.1:4040/api/tunnels | jq '.tunnels[0] .public_url')\" echo \"[ngrok] $(date) $NEW_STATUS\" OLD_STATUS=\"\" if [ -e \"$URL_DIR\" ]; then OLD_STATUS=\"$(cat $URL_DIR)\" fi # check if differ if [ \"$NEW_STATUS\" != \"$OLD_STATUS\" ]; then echo \"[ngrok] New status detected! Updating IP\" echo \"$NEW_STATUS\" \u003e \"$URL_DIR\" python3 \"$DIR/tsend.py\" \"$NEW_STATUS\" fi If everything works you should receive notification to your telegram if IP or port will change.\nTroubleshooting My ngrok tunnel is started, but I can’t access service Is this service running also on localhost? Or can you reach shown ngrok host (IP)?\nCan I use something else than telegram? Yes, but I had already telegram in place. If you need you can use i.e Discord, Slack, mail, etc. (but you need to modify tsend.py script)\nReferences https://ngrok.com/ https://telegram.org/ ",
  "wordCount" : "727",
  "inLanguage": "en",
  "datePublished": "2020-02-01T13:53:37+01:00",
  "dateModified": "2020-02-01T13:53:37+01:00",
  "author":{
    "@type": "Person",
    "name": "trib0r3"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://rehex.ninja/posts/expose-any-port-with-ngrok/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "reHex Ninja",
    "logo": {
      "@type": "ImageObject",
      "url": "https://rehex.ninja/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://rehex.ninja/" accesskey="h" title="reHex Ninja (Alt + H)">reHex Ninja</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://rehex.ninja/tags" title="#tags">
                    <span>#tags</span>
                </a>
            </li>
            <li>
                <a href="https://rehex.ninja/search" title="search (Alt &#43; /)" accesskey=/>
                    <span>search</span>
                </a>
            </li>
            <li>
                <a href="https://rehex.ninja/archives" title="archives">
                    <span>archives</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://rehex.ninja/">Home</a>&nbsp;»&nbsp;<a href="https://rehex.ninja/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Expose Any Port With Ngrok
    </h1>
    <div class="post-meta"><span title='2020-02-01 13:53:37 +0100 CET'>February 1, 2020</span>&nbsp;·&nbsp;trib0r3&nbsp;|&nbsp;<a href="https://github.com/trib0r3/trib0r3.github.io/issues" rel="noopener noreferrer edit" target="_blank">Suggest Changes</a>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#1-setup-ngrok" aria-label="1. Setup NGrok">1. Setup NGrok</a></li>
                <li>
                    <a href="#2-verify-that-tunnel-works" aria-label="2. Verify that tunnel works">2. Verify that tunnel works</a></li>
                <li>
                    <a href="#3-bypass-random-port-issue" aria-label="3. Bypass random port issue">3. Bypass random port issue</a><ul>
                        
                <li>
                    <a href="#install-dependencies" aria-label="Install dependencies">Install dependencies</a></li>
                <li>
                    <a href="#setup-telegram-bot" aria-label="Setup Telegram bot">Setup Telegram bot</a></li>
                <li>
                    <a href="#make-your-service-always-available" aria-label="Make your service always available">Make your service always available</a></li></ul>
                </li>
                <li>
                    <a href="#troubleshooting" aria-label="Troubleshooting">Troubleshooting</a><ul>
                        <ul>
                        
                <li>
                    <a href="#my-ngrok-tunnel-is-started-but-i-cant-access-service" aria-label="My ngrok tunnel is started, but I can&rsquo;t access service">My ngrok tunnel is started, but I can&rsquo;t access service</a></li></ul>
                    
                <li>
                    <a href="#can-i-use-something-else-than-telegram" aria-label="Can I use something else than telegram?">Can I use something else than telegram?</a></li></ul>
                </li>
                <li>
                    <a href="#references" aria-label="References">References</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>How to expose any port to the Internet without exposing your private IP (for free).</p>
<p>Today I will show you how to easly setup exposure of any port without exposing your IP, this solution also bypasses situation when your ISP is not giving possibility to have private (own) IP address which is not behind any NAT.</p>
<p>I used this solution to create access (for myself) to SSH and locally hosted security camera system at my home.</p>
<h2 id="1-setup-ngrok">1. Setup NGrok<a hidden class="anchor" aria-hidden="true" href="#1-setup-ngrok">#</a></h2>
<p>First of all you need to have an ngrok account<a href="/posts/expose-any-port-with-ngrok/#references">[1]</a> - free account is enough for our purposes. Generally ngrok is a reverse-proxy service where you need tun ngrok client on target machine, client enables connection with ngrok server and then you are able to connect with your machine (where ngrok client is running) via Internet.</p>
<blockquote>
<p>Free acount forwards local port as random remote port (usually under const hostname: <code>0.tcp.ngrok.io</code> for tcp tunnels)</p></blockquote>
<p>After you have account you need to download client and activate account with your API key (follow the instuctions from web service).</p>
<h2 id="2-verify-that-tunnel-works">2. Verify that tunnel works<a hidden class="anchor" aria-hidden="true" href="#2-verify-that-tunnel-works">#</a></h2>
<p>Create ngrok config file (under <code>~/.ngrok2/ngrok.yml</code>):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#f92672">authtoken</span>: <span style="color:#ae81ff">&lt;YOUR_TOKEN_HERE&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">tunnels</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">sshglob</span>:
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">proto</span>: <span style="color:#ae81ff">tcp</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">addr</span>: <span style="color:#ae81ff">22</span>
</span></span></code></pre></div><p>Above config setups tunnel <code>sshglob</code> which forwards locally hosted <code>tcp/22</code> - in this case SSH service. You should change these values according to your needs.</p>
<p>Now you can try to start ngrok <code>ngrok start sshglob</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>ngrok by @inconshreveable                                                            (Ctrl+C to quit)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Session Status                online
</span></span><span style="display:flex;"><span>Account                       whoami (Plan: Free)
</span></span><span style="display:flex;"><span>Version                       2.3.35
</span></span><span style="display:flex;"><span>Region                        United States (us)
</span></span><span style="display:flex;"><span>Web Interface                 http://127.0.0.1:4040
</span></span><span style="display:flex;"><span>Forwarding                    tcp://0.tcp.ngrok.io:13036 -&gt; localhost:22
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Connections                   ttl     opn     rt1     rt5     p50     p90
</span></span><span style="display:flex;"><span>                              0       0       0.00    0.00    0.00    0.00
</span></span></code></pre></div><p>Now you should be able to connect with ssh (in my case) with command: <code>ssh -p 13036 whoami@0.tcp.ngrok.io</code>.</p>
<p>If you don&rsquo;t have any issues with accessing you machine over Internet you are free to follow next steps :) (otherwise check <a href="/posts/expose-any-port-with-ngrok/#troubleshooting">Troubleshooting</a> section).</p>
<h2 id="3-bypass-random-port-issue">3. Bypass random port issue<a hidden class="anchor" aria-hidden="true" href="#3-bypass-random-port-issue">#</a></h2>
<p>If you run ngrok couple of times you should notice that every time you service is running at random port, to bypass this issue you can by a premium or make some additional steps presented below.</p>
<h3 id="install-dependencies">Install dependencies<a hidden class="anchor" aria-hidden="true" href="#install-dependencies">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt install -y python3 python3-pip curl jq
</span></span><span style="display:flex;"><span>pip3 install telegram
</span></span></code></pre></div><h3 id="setup-telegram-bot">Setup Telegram bot<a hidden class="anchor" aria-hidden="true" href="#setup-telegram-bot">#</a></h3>
<p>For myself I decided to create Telegram<a href="/posts/expose-any-port-with-ngrok/#references">[2]</a> bot which will send me external hostname and random IP address. Ofc you need to have created Telegram account to follow next steps.</p>
<ol>
<li>Start conversation with telegram <a href="https://t.me/botfather">Botfather</a>.</li>
<li>Type commands in Botfather conversation:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>/newbot
</span></span><span style="display:flex;"><span>mysuper_bot <span style="color:#75715e"># replace &#34;mysuper&#34; with your bot name</span>
</span></span></code></pre></div><ol start="3">
<li>Copy API key and start conversation with your bot</li>
<li>Type something in the chat &amp; run the below code:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> sys <span style="color:#f92672">import</span> argv
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> telegram
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>bot <span style="color:#f92672">=</span> telegram<span style="color:#f92672">.</span>Bot(token<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;YOUR_API_KEY&#34;</span>)
</span></span><span style="display:flex;"><span>print(bot<span style="color:#f92672">.</span>getUpdates())
</span></span></code></pre></div><ol start="5">
<li>Copy <code>chat_id</code></li>
<li>Create script <code>tsend.py</code>:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> sys <span style="color:#f92672">import</span> argv
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> telegram
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>bot <span style="color:#f92672">=</span> telegram<span style="color:#f92672">.</span>Bot(token<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;YOUR_API_KEY&#34;</span>) <span style="color:#75715e"># FIXME your api key</span>
</span></span><span style="display:flex;"><span>chat_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1234</span> <span style="color:#75715e"># FIXME YOUR_CHAT_ID</span>
</span></span><span style="display:flex;"><span>raw_msg <span style="color:#f92672">=</span> argv[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#39;&#34;&#39;</span>,<span style="color:#e6db74">&#39;&#39;</span>)<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#39;tcp://&#39;</span>,<span style="color:#e6db74">&#39;&#39;</span>)  <span style="color:#75715e"># &#34;tcp://0.tcp.ngrok.io:10361&#34;</span>
</span></span><span style="display:flex;"><span>ip,port <span style="color:#f92672">=</span> raw_msg<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;:&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>message <span style="color:#f92672">=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">{</span>ip<span style="color:#e6db74">}</span><span style="color:#e6db74">:</span><span style="color:#e6db74">{</span>port<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39;</span>
</span></span><span style="display:flex;"><span>bot<span style="color:#f92672">.</span>send_message(chat_id<span style="color:#f92672">=</span>chat_id, text<span style="color:#f92672">=</span>message)
</span></span></code></pre></div><ol start="7">
<li>Check if you are able to send message to you from your bot by typing <code>python3 tsend.py hello</code>.</li>
</ol>
<h3 id="make-your-service-always-available">Make your service always available<a hidden class="anchor" aria-hidden="true" href="#make-your-service-always-available">#</a></h3>
<p>Final step, below script will:</p>
<ol>
<li>Start ngrok tunnel if it is not running</li>
<li>Send you actual <code>IP:PORT</code> thanks to telegram bot</li>
</ol>
<blockquote>
<p>Below script is designed to be run from cron, thanks to this solution it will be run automatically i.e every 5 minutes:
<code>*/5 * * * * path/to/monitor.sh</code></p></blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># monitor.sh</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>NGROK<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;/usr/local/bin/ngrok&#39;</span>
</span></span><span style="display:flex;"><span>DIR<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/ngrok-apps&#34;</span> <span style="color:#75715e"># directory containing this script and tsend.py</span>
</span></span><span style="display:flex;"><span>URL_DIR<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;/tmp/ngrok-url&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># check if it&#39;s working</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> ! <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>pidof ngrok<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;[ngrok] is not working, starting new instance...&#34;</span>
</span></span><span style="display:flex;"><span>        $NGROK start sshglob &gt; /dev/null &amp;
</span></span><span style="display:flex;"><span>        sleep <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># get current status of tunnel</span>
</span></span><span style="display:flex;"><span>NEW_STATUS<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>curl -s http://127.0.0.1:4040/api/tunnels | jq <span style="color:#e6db74">&#39;.tunnels[0] .public_url&#39;</span><span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;[ngrok] </span><span style="color:#66d9ef">$(</span>date<span style="color:#66d9ef">)</span><span style="color:#e6db74"> </span>$NEW_STATUS<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>OLD_STATUS<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -e <span style="color:#e6db74">&#34;</span>$URL_DIR<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>        OLD_STATUS<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>cat $URL_DIR<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># check if differ</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> <span style="color:#e6db74">&#34;</span>$NEW_STATUS<span style="color:#e6db74">&#34;</span> !<span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;</span>$OLD_STATUS<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;[ngrok] New status detected! Updating IP&#34;</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;</span>$NEW_STATUS<span style="color:#e6db74">&#34;</span> &gt; <span style="color:#e6db74">&#34;</span>$URL_DIR<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>        python3 <span style="color:#e6db74">&#34;</span>$DIR<span style="color:#e6db74">/tsend.py&#34;</span> <span style="color:#e6db74">&#34;</span>$NEW_STATUS<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span></code></pre></div><p>If everything works you should receive notification to your telegram if IP or port will change.</p>
<h2 id="troubleshooting">Troubleshooting<a hidden class="anchor" aria-hidden="true" href="#troubleshooting">#</a></h2>
<h4 id="my-ngrok-tunnel-is-started-but-i-cant-access-service">My ngrok tunnel is started, but I can&rsquo;t access service<a hidden class="anchor" aria-hidden="true" href="#my-ngrok-tunnel-is-started-but-i-cant-access-service">#</a></h4>
<p>Is this service running also on localhost? Or can you reach shown ngrok host (IP)?</p>
<h3 id="can-i-use-something-else-than-telegram">Can I use something else than telegram?<a hidden class="anchor" aria-hidden="true" href="#can-i-use-something-else-than-telegram">#</a></h3>
<p>Yes, but I had already telegram in place. If you need you can use i.e Discord, Slack, mail, etc. (but you need to modify <code>tsend.py</code> script)</p>
<h2 id="references">References<a hidden class="anchor" aria-hidden="true" href="#references">#</a></h2>
<ol>
<li><a href="https://ngrok.com/">https://ngrok.com/</a></li>
<li><a href="https://telegram.org/">https://telegram.org/</a></li>
</ol>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://rehex.ninja/tags/dev/">Dev</a></li>
      <li><a href="https://rehex.ninja/tags/linux/">Linux</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://rehex.ninja/posts/ida-pro-plugins/">
    <span class="title">« Prev</span>
    <br>
    <span>Ida Pro Plugins</span>
  </a>
  <a class="next" href="https://rehex.ninja/posts/unmap-pe-manually/">
    <span class="title">Next »</span>
    <br>
    <span>Unmap PE Manually</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Expose Any Port With Ngrok on x"
            href="https://x.com/intent/tweet/?text=Expose%20Any%20Port%20With%20Ngrok&amp;url=https%3a%2f%2frehex.ninja%2fposts%2fexpose-any-port-with-ngrok%2f&amp;hashtags=dev%2clinux">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Expose Any Port With Ngrok on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2frehex.ninja%2fposts%2fexpose-any-port-with-ngrok%2f&amp;title=Expose%20Any%20Port%20With%20Ngrok&amp;summary=Expose%20Any%20Port%20With%20Ngrok&amp;source=https%3a%2f%2frehex.ninja%2fposts%2fexpose-any-port-with-ngrok%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Expose Any Port With Ngrok on reddit"
            href="https://reddit.com/submit?url=https%3a%2f%2frehex.ninja%2fposts%2fexpose-any-port-with-ngrok%2f&title=Expose%20Any%20Port%20With%20Ngrok">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Expose Any Port With Ngrok on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2frehex.ninja%2fposts%2fexpose-any-port-with-ngrok%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Expose Any Port With Ngrok on whatsapp"
            href="https://api.whatsapp.com/send?text=Expose%20Any%20Port%20With%20Ngrok%20-%20https%3a%2f%2frehex.ninja%2fposts%2fexpose-any-port-with-ngrok%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Expose Any Port With Ngrok on telegram"
            href="https://telegram.me/share/url?text=Expose%20Any%20Port%20With%20Ngrok&amp;url=https%3a%2f%2frehex.ninja%2fposts%2fexpose-any-port-with-ngrok%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Expose Any Port With Ngrok on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=Expose%20Any%20Port%20With%20Ngrok&u=https%3a%2f%2frehex.ninja%2fposts%2fexpose-any-port-with-ngrok%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://rehex.ninja/">reHex Ninja</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><style>
    .main {
        max-width: calc(var(--main-width) + var(--gap) * 15);
    }
</style>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
